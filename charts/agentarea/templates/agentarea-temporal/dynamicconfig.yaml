{{- if .Values.temporal.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-temporal-dynamicconfig
  labels:
    {{- include "agentarea.labels" . | nindent 4 }}
    app.kubernetes.io/component: temporal
data:
  development-sql.yaml: |
    frontend.enableClientVersionCheck:
      - value: true
        constraints: {}

    history.defaultActivityRetryPolicy:
      - value:
          InitialIntervalInSeconds: 1
          MaximumIntervalInSeconds: 100
          BackoffCoefficient: 2.0
          MaximumAttempts: 0
        constraints: {}

    history.defaultWorkflowRetryPolicy:
      - value:
          InitialIntervalInSeconds: 1
          MaximumIntervalInSeconds: 100
          BackoffCoefficient: 2.0
          MaximumAttempts: 0
        constraints: {}

    matching.numTaskqueueReadPartitions:
      - value: 4
        constraints: {}

    matching.numTaskqueueWritePartitions:
      - value: 4
        constraints: {}

    worker.replicatorConcurrency:
      - value: 1000
        constraints: {}

    system.forceSearchAttributesCacheRefreshOnRead:
      - value: true
        constraints: {}

    system.enableActivityEagerExecution:
      - value: true
        constraints: {}

    system.defaultWorkflowExecutionTimeout:
      - value: "168h"
        constraints: {}

    system.defaultActivityExecutionTimeout:
      - value: "24h"
        constraints: {}

    system.searchAttributesNumberOfKeysLimit:
      - value: 100
        constraints: {}

    system.searchAttributesSizeOfValueLimit:
      - value: 40960
        constraints: {}

    system.searchAttributesTotalSizeLimit:
      - value: 40960
        constraints: {}
{{- end }}