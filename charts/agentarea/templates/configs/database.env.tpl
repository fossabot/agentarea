{{/*
AUTOGENERATED FILE - DO NOT EDIT.
Generated by scripts/generate_env_tpls.py from charts/agentarea/config.yaml
*/}}

{{- define "agentarea.database.configVars" -}}
POSTGRES_HOST: "{{ .Release.Name }}-postgresql"
POSTGRES_PORT: "{{ .Values.global.database.port }}"
POSTGRES_DB: "{{ .Values.global.database.name }}"
{{- end }}

{{- define "agentarea.database.envs" }}
- name: POSTGRES_HOST
  valueFrom:
    configMapKeyRef:
      name: {{ include "agentarea.fullname" . }}-env-database
      key: POSTGRES_HOST
- name: POSTGRES_PORT
  valueFrom:
    configMapKeyRef:
      name: {{ include "agentarea.fullname" . }}-env-database
      key: POSTGRES_PORT
- name: POSTGRES_DB
  valueFrom:
    configMapKeyRef:
      name: {{ include "agentarea.fullname" . }}-env-database
      key: POSTGRES_DB
- name: DATABASE_URL
  value: postgresql://$(POSTGRES_USER):$(POSTGRES_PASSWORD)@$(POSTGRES_HOST):$(POSTGRES_PORT)/$(POSTGRES_DB)
{{- end }}

{{- define "agentarea.database.secrets.envs" }}
- name: POSTGRES_USER
  valueFrom:
    secretKeyRef:
      name: "{{ .Values.global.secrets.postgresql }}"
      key: username
- name: POSTGRES_PASSWORD
  valueFrom:
    secretKeyRef:
      name: "{{ .Values.global.secrets.postgresql }}"
      key: password
{{- end }}
